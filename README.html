<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h2 id="todolist-rest-api">Todolist REST API</h2>
<hr>
<h3 id="introduction">Introduction</h3>
<p>This software was written solely in Go and provides a simple REST API to manage ToDos with CRUD operations. For each ToDo different tasks can be added. The application supports basic auth with api key. Input JSON are validated and strings like name or description get sanitized before storage. For Storage Postgres is used. However, also another database can be used with only slight adjustment as database access is abstract with the GORM ORM that supports different relational databases.</p>
<h3 id="key-dependencies">Key Dependencies</h3>
<ul>
<li><a href="https://golang.org">Go</a>: This project uses Go to create a reliable, fast and efficient todolist REST API.</li>
<li><a href="https://gorm.io">GORM</a>: This project uses the GORM go ORM to abstract the database and allow simple and reliable database access.</li>
<li><a href="https://www.postgresql.org">PostgreSQL</a>: Postgres is used as SQL database of choice.</li>
<li><a href="https://github.com/gorilla/mux">Mux</a>: As router gorilla mux is used.</li>
</ul>
<h2 id="installation">Installation</h2>
<hr>
<p>The repository is already prepared for deployment on Heroku and different options are provided to run the todolist API locally.</p>
<h2 id="local">Local</h2>
<p>The Docker-Compose.yml, multi-stage Dockerfile, Visual Studio Code Workspace or just the go sources and module can be used to run the todolist REST API locally. Depending on which solution is chosen and your Postgres Settings please adjust the <code>.env</code> / <code>Dockerfile</code> file accordingly.</p>
<ol>
<li>
<h4 id="debug">Debug</h4>
<p>To debug the todolist REST API it is recommended to install Visual Studio Code and open the provided todolist.code-workspace.</p>
<p>Note: Before running any code, please adjust the <code>.env</code> file and run the following command:</p>
<pre class="hljs"><code><div>source .env
</div></code></pre>
</li>
<li>
<h4 id="binary">Binary</h4>
<p>It is also possible to just use <code>go build</code> and run the binary.</p>
<p>Note: Before running any code, please adjust the <code>.env</code> file and run the following command:</p>
<pre class="hljs"><code><div>source .env
</div></code></pre>
</li>
<li>
<h4 id="docker-compose">Docker-Compose</h4>
<p>To run the todolist REST API as Docker container, feel free to use the provided <code>docker-compose.yml</code>. It also generates a PostgreSQL docker image that can be used as database. Otherwise the corresponding container can be deactivated after build and a local or online PostgreSQL solution can be used.</p>
<p>Note: The <code>docker-compose.yml</code> uses the <code>.env</code> file. This should overwrite the ENV variables defined in the <code>Dockerfile</code>. Therfore before running any code adjust the <code>.env</code> file accordingly and run the following command:</p>
<pre class="hljs"><code><div>source .env
</div></code></pre>
<p>Run the following command to create the docker containers:</p>
<pre class="hljs"><code><div>docker-compose -f docker-compose.yml up
</div></code></pre>
</li>
<li>
<h4 id="dockerfile">Dockerfile</h4>
<p>To use a already existing local or online PostgreSQL installation you can directly use the <code>multi-stage Dockerfile</code>. The multi-stage Dockerfile specifies build stage with a full-fledged golang image and copies the static binary into a minimalistic docker container with minimal resource usage and without shell for production!</p>
<p>Note: The Dockerfile is prepared for Heroku deployment. Therefore enviroment variables are set for Heroku PostgreSQL. Before compose, adjust <code>Dockerfile</code> with correct environment variables based on the prefered PostgreSQL settings.</p>
<p>Run the following command to create the docker image:</p>
<pre class="hljs"><code><div>docker build -t todolist .
</div></code></pre>
<p>Note: Please ensure that port 8000 is set when running the todolist image for local testing.</p>
</li>
</ol>
<h2 id="deployment">Deployment</h2>
<p>The todolist REST API is already deployed on Heroku and reachable under the url provided in the todolist_heroku.postman_environment.json: https://todolist-koch.herokuapp.com</p>
<p>The following steps are necessary to deploy the todolist on Heroku yourself:</p>
<ol>
<li>Create new app on Heroku</li>
<li>Chose deployment with Heroku git</li>
<li>Ideally test Dockerfile locally first</li>
<li>Add Heroku Postgres as Add-On in Heroku</li>
<li>Copy Heroku Postgres Info into ENV variables in Dockerfile and Heroku.yml. environment Variable PORT will be generated by Heroku and overwrites setting in Docker container.</li>
<li>Install Heroku CLI and run the following commands:</li>
<li>$ heroku login</li>
<li>$ heroku git:remote -a &lt;heroku_app_name&gt;</li>
<li>$ heroku stack:set container</li>
<li>$ git push heroku main</li>
</ol>
<p>The deployment is started automatically by pushing the repository to the git of the Heroku app.</p>
<p>Note: The heroku.yml also allows to define a realease phase. The release phase allows testing your docker build before deployment. If the test in the release phase fails the docker container will not be deployed. For future version a release phase could be added to further improve the deployment process.</p>
<h2 id="testing">Testing</h2>
<hr>
<p>The unittest in routes_test.go can be used for local testing or in the release stage of deployment. Additionally a postman collection is provided that can be used to test the local installation or the deployed endpoint in the release phase or in production.</p>
<h3 id="1-unittest">1. Unittest</h3>
<p>The unittest allows quick testing of the provided golang code during development and automatic testing during deployment. With the provided Visual Studio Workspace it is also possible to debug the unittest.</p>
<p>Currently routes_test.go runs 58 tests that cover most parts of the software. In the future further tests can be added to also trigger some of the more specific error cases. To get a detailed overview of the code coverage please run:</p>
<pre class="hljs"><code><div>go test -coverprofile=coverage.out
go tool cover -html=coverage.out
</div></code></pre>
<p>Example unittest output:</p>
<pre class="hljs"><code><div>=== RUN   Test_Router
2021/05/04 10:24:17 load env
2021/05/04 10:24:17 connect to Postgres ...
2021/05/04 10:24:17 successfully connected to Postgres
    routes_test.go:174: Test_Router tabletest: 1, name: GET /
    routes_test.go:174: Test_Router tabletest: 2, name: GET /todos
    routes_test.go:174: Test_Router tabletest: 3, name: POST /todos (add todo ignore unknown key)
    routes_test.go:174: Test_Router tabletest: 4, name: POST /todos (add todo with name only)
    routes_test.go:174: Test_Router tabletest: 5, name: POST /todos (add todo and ignore id string)
    routes_test.go:174: Test_Router tabletest: 6, name: POST /todos (bad request with id 1941041)
    routes_test.go:174: Test_Router tabletest: 7, name: POST /todos (bad request without JSON)
    routes_test.go:174: Test_Router tabletest: 8, name: POST /todos (bad request without name)
    routes_test.go:174: Test_Router tabletest: 9, name: PUT /todos (PUT not supported)

2021/05/04 10:24:17 /Users/User/go/src/git/todolist/routes.go:112 record not found
[7.222ms] [rows:0] SELECT * FROM &quot;todos&quot; WHERE &quot;todos&quot;.&quot;id&quot; = 1941042 AND &quot;todos&quot;.&quot;deleted_at&quot; IS NULL ORDER BY &quot;todos&quot;.&quot;id&quot; LIMIT 1
&lt;nil&gt;
    routes_test.go:174: Test_Router tabletest: 10, name: PUT /todos/1941042 (PUT not found)
    routes_test.go:174: Test_Router tabletest: 11, name: PATCH /todos (PATCH not supported)

2021/05/04 10:24:17 /Users/User/go/src/git/todolist/routes.go:181 WHERE conditions required
[5.198ms] [rows:0] DELETE FROM &quot;todos&quot;
    routes_test.go:174: Test_Router tabletest: 12, name: DELETE /todos (trash empty, ignore JSON)

2021/05/04 10:24:17 /Users/User/go/src/git/todolist/routes.go:181 WHERE conditions required
[2.940ms] [rows:0] DELETE FROM &quot;todos&quot;
    routes_test.go:174: Test_Router tabletest: 13, name: DELETE /todos (trash empty)
--- PASS: Test_Router (0.19s)
=== RUN   Test_Wrong_API_Key
2021/05/04 10:24:17 connect to Postgres ...
2021/05/04 10:24:17 successfully connected to Postgres
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 14, name: GET /
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 15, name: GET /todos
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 16, name: POST /todos (add todo ignore unknown key)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 17, name: POST /todos (add todo with name only)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 18, name: POST /todos (add todo and ignore id string)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 19, name: POST /todos (bad request with id 1941041)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 20, name: POST /todos (bad request without JSON)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 21, name: POST /todos (bad request without name)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 22, name: PUT /todos/1941042 (PUT not found)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 23, name: DELETE /todos (trash empty, ignore JSON)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50301 tried to access critical API with wrong API key!
    routes_test.go:223: Test_Router tabletest: 24, name: DELETE /todos (trash empty)
--- PASS: Test_Wrong_API_Key (0.14s)
=== RUN   Test_Without_API_Key
2021/05/04 10:24:17 connect to Postgres ...
2021/05/04 10:24:17 successfully connected to Postgres
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 25, name: GET /
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 26, name: GET /todos
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 27, name: POST /todos (add todo ignore unknown key)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 28, name: POST /todos (add todo with name only)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 29, name: POST /todos (add todo and ignore id string)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 30, name: POST /todos (bad request with id 1941041)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 31, name: POST /todos (bad request without JSON)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 32, name: POST /todos (bad request without name)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 33, name: PUT /todos/1941042 (PUT not found)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 34, name: DELETE /todos (trash empty, ignore JSON)
2021/05/04 10:24:17 WARNING: IP 127.0.0.1:50305 tried to access critical API without API key!
    routes_test.go:272: Test_Router tabletest: 35, name: DELETE /todos (trash empty)
--- PASS: Test_Without_API_Key (0.12s)
=== RUN   Test_Post_Todos_With_Id
    routes_test.go:304: Test_Post_Todos_With_Id test: 36, name: post todo with existing ids
--- PASS: Test_Post_Todos_With_Id (0.01s)
=== RUN   Test_Post_Todos
    routes_test.go:352: Test_Post_Todos test: 37, name: post todo
--- PASS: Test_Post_Todos (0.03s)
=== RUN   Test_Get_Todo
    routes_test.go:410: Test_Get_Todo: 38, name: GET http://127.0.0.1:50310/todos/269
    routes_test.go:410: Test_Get_Todo: 39, name: GET http://127.0.0.1:50310/todos/270
    routes_test.go:410: Test_Get_Todo: 40, name: GET http://127.0.0.1:50310/todos/271
    routes_test.go:410: Test_Get_Todo: 41, name: GET http://127.0.0.1:50310/todos/272
--- PASS: Test_Get_Todo (0.03s)
=== RUN   Test_Put_Todo
    routes_test.go:479: Test_Put_Todo: 42, name: PUT http://127.0.0.1:50312/todos/269
    routes_test.go:479: Test_Put_Todo: 43, name: PUT http://127.0.0.1:50312/todos/270
    routes_test.go:479: Test_Put_Todo: 44, name: PUT http://127.0.0.1:50312/todos/271
    routes_test.go:479: Test_Put_Todo: 45, name: PUT http://127.0.0.1:50312/todos/272
--- PASS: Test_Put_Todo (0.09s)
=== RUN   Test_Post_Todo
    routes_test.go:519: Test_Post_Todo not allowed: 46, name: POST http://127.0.0.1:50314/todos/269
    routes_test.go:519: Test_Post_Todo not allowed: 47, name: POST http://127.0.0.1:50314/todos/270
    routes_test.go:519: Test_Post_Todo not allowed: 48, name: POST http://127.0.0.1:50314/todos/271
    routes_test.go:519: Test_Post_Todo not allowed: 49, name: POST http://127.0.0.1:50314/todos/272
--- PASS: Test_Post_Todo (0.01s)
=== RUN   Test_Patch_Todo
    routes_test.go:559: Test_Patch_Todo not allowed: 50, name: PATCH http://127.0.0.1:50316/todos/269
    routes_test.go:559: Test_Patch_Todo not allowed: 51, name: PATCH http://127.0.0.1:50316/todos/270
    routes_test.go:559: Test_Patch_Todo not allowed: 52, name: PATCH http://127.0.0.1:50316/todos/271
    routes_test.go:559: Test_Patch_Todo not allowed: 53, name: PATCH http://127.0.0.1:50316/todos/272
--- PASS: Test_Patch_Todo (0.01s)
=== RUN   Test_Delete_Todo
    routes_test.go:618: Test_Delete_Todo: 54, name: DELETE http://127.0.0.1:50318/todos/269
    routes_test.go:618: Test_Delete_Todo: 55, name: DELETE http://127.0.0.1:50318/todos/270
    routes_test.go:618: Test_Delete_Todo: 56, name: DELETE http://127.0.0.1:50318/todos/271
    routes_test.go:618: Test_Delete_Todo: 57, name: DELETE http://127.0.0.1:50318/todos/272
--- PASS: Test_Delete_Todo (0.05s)
=== RUN   Test_Delete_Todos
    routes_test.go:675: Test_Delete_Todo: 58, name: DELETE http://127.0.0.1:50320/todos
--- PASS: Test_Delete_Todos (0.02s)
PASS
coverage: 78.2% of statements
ok  	todolist	0.916s
</div></code></pre>
<h3 id="1-postman">1. Postman</h3>
<p>A Postman collection is provided to test the endpoints. The Postman collection allows to test the todolist REST API locally, as well as in the release stage or in production by adjusting the <code>domain</code> Postman environment variable. For testing over the command line install Newman. Newman also allows automated testing.</p>
<p>Note: The <code>key</code> Postman collection variable must match with the .env file and the heroku.yml / Dockerfile. The <code>domain</code> Postman environment variable must match with the domain of the corresponding todolist REST API!</p>
<p>To run the tests in postman import the provided collection and the provided environments. The provided postman collection and postman heroku environment can also be used to test the already deployed solution.</p>
<p>To run the postman collection with newman, please type the following command for the already deployed Heroku todolist REST API:</p>
<pre class="hljs"><code><div>newman run todolist.postman_collection.json -e todolist_heroku.postman_environment.json
</div></code></pre>
<p>To run the postman collection with newman to test locally or another deployment adjust the domain env var with the following command:</p>
<pre class="hljs"><code><div>newman run todolist.postman_collection.json --env-var &quot;domain=http://localhost:8000&quot;
</div></code></pre>
<p>Example Newman Output:</p>
<pre class="hljs"><code><div>┌─────────────────────────┬───────────────────┬──────────────────┐
│                         │          executed │           failed │
├─────────────────────────┼───────────────────┼──────────────────┤
│              iterations │                 1 │                0 │
├─────────────────────────┼───────────────────┼──────────────────┤
│                requests │                14 │                0 │
├─────────────────────────┼───────────────────┼──────────────────┤
│            test-scripts │                28 │                0 │
├─────────────────────────┼───────────────────┼──────────────────┤
│      prerequest-scripts │                14 │                0 │
├─────────────────────────┼───────────────────┼──────────────────┤
│              assertions │                53 │                0 │
├─────────────────────────┴───────────────────┴──────────────────┤
│ total run duration: 1037ms                                     │
├────────────────────────────────────────────────────────────────┤
│ total data received: 10.53KB (approx)                          │
├────────────────────────────────────────────────────────────────┤
│ average response time: 28ms [min: 10ms, max: 98ms, s.d.: 21ms] │
└────────────────────────────────────────────────────────────────┘
</div></code></pre>
<h2 id="controllers--routes">Controllers / Routes</h2>
<hr>
<p>Todolist REST API Controllers / Routes.</p>
<p>Note: All Routes expect an api key for basic auth. The api key can be configured in the <code>TODOLIST_API_KEY</code> env variable. For future version a list of api keys could be implemented. However, this would also require an additional API to provide and manage the API KEYs for different clients.</p>
<h2 id="get-index">GET index</h2>
<pre class="hljs"><code><div>GET /
</div></code></pre>
<p>Soft redirect to GET /todos</p>
<h2 id="get-todos">GET todos</h2>
<pre class="hljs"><code><div>GET /todos
</div></code></pre>
<p>Returns a JSON with a complete list of todos and theire tasks.</p>
<p>Example response JSON:</p>
<pre class="hljs"><code><div>[
    {
        &quot;id&quot;: 16,
        &quot;name&quot;: &quot;todolist go REST API&quot;,
        &quot;description&quot;: &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
        &quot;tasks&quot;: [
            {
                &quot;id&quot;: 88,
                &quot;name&quot;: &quot;Create Server&quot;,
                &quot;description&quot;: &quot;Create Server according to specs with go&quot;
            },
            {
                &quot;id&quot;: 89,
                &quot;name&quot;: &quot;Unittest&quot;,
                &quot;description&quot;: &quot;Build Unittest for go server&quot;
            },
            {
                &quot;id&quot;: 90,
                &quot;name&quot;: &quot;Docker&quot;,
                &quot;description&quot;: &quot;create docker container with go server&quot;
            },
            {
                &quot;id&quot;: 91,
                &quot;name&quot;: &quot;Postman&quot;,
                &quot;description&quot;: &quot;create postman test for docker container&quot;
            },
            {
                &quot;id&quot;: 92,
                &quot;name&quot;: &quot;Documentation&quot;,
                &quot;description&quot;: &quot;write markdown documentation that describes installation, API, models, dependencies, deployment and so on&quot;
            }
        ]
    },
    {
        &quot;id&quot;: 17,
        &quot;name&quot;: &quot;todolist go REST API&quot;,
        &quot;description&quot;: &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
        &quot;tasks&quot;: [
            {
                &quot;id&quot;: 93,
                &quot;name&quot;: &quot;Create Server&quot;,
                &quot;description&quot;: &quot;Create Server according to specs with go&quot;
            },
            {
                &quot;id&quot;: 94,
                &quot;name&quot;: &quot;Unittest&quot;,
                &quot;description&quot;: &quot;Build Unittest for go server&quot;
            },
            {
                &quot;id&quot;: 95,
                &quot;name&quot;: &quot;Docker&quot;,
                &quot;description&quot;: &quot;create docker container with go server&quot;
            },
            {
                &quot;id&quot;: 96,
                &quot;name&quot;: &quot;Postman&quot;,
                &quot;description&quot;: &quot;create postman test for docker container&quot;
            },
            {
                &quot;id&quot;: 97,
                &quot;name&quot;: &quot;Documentation&quot;,
                &quot;description&quot;: &quot;write markdown documentation that describes installation, API, models, dependencies, deployment and so on&quot;
            }
        ]
    }
]
</div></code></pre>
<h2 id="post-todos">POST todos</h2>
<pre class="hljs"><code><div>POST /todos
</div></code></pre>
<p>Expects a JSON with a todo that may have multiple tasks. However, the JSON shall not include any &quot;id&quot; fields!</p>
<p>Example request JSON:</p>
<pre class="hljs"><code><div>{
    &quot;name&quot; : &quot;todolist go REST API&quot;,
    &quot;description&quot; : &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
    &quot;tasks&quot;:[
        {
            &quot;name&quot; : &quot;Create Server&quot;,
            &quot;description&quot; : &quot;Create Server according to specs with go&quot;
        },
        {
            &quot;name&quot; : &quot;Unittest&quot;,
            &quot;description&quot; : &quot;Build Unittest for go server&quot;
        },
        {
            &quot;name&quot; : &quot;Docker&quot;,
            &quot;description&quot; : &quot;create docker container with go server&quot;
        },
        {
            &quot;name&quot; : &quot;Postman&quot;,
            &quot;description&quot; : &quot;create postman test for docker container&quot;
        },
        {
            &quot;name&quot; : &quot;Documentation&quot;,
            &quot;description&quot; : &quot;write markdown documentation that describes installation, API, models, dependencies, deployment and so on&quot;
        }
    ]
}
</div></code></pre>
<p>Returns a JSON with the todo that was provided in the POST request with the corresponding &quot;id&quot; fields for the todo and the tasks.</p>
<p>Example response JSON:</p>
<pre class="hljs"><code><div>{
    &quot;id&quot;: 16,
    &quot;name&quot;: &quot;todolist go REST API&quot;,
    &quot;description&quot;: &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
    &quot;tasks&quot;: [
        {
            &quot;id&quot;: 88,
            &quot;name&quot;: &quot;Create Server&quot;,
            &quot;description&quot;: &quot;Create Server according to specs with go&quot;
        },
        {
            &quot;id&quot;: 89,
            &quot;name&quot;: &quot;Unittest&quot;,
            &quot;description&quot;: &quot;Build Unittest for go server&quot;
        },
        {
            &quot;id&quot;: 90,
            &quot;name&quot;: &quot;Docker&quot;,
            &quot;description&quot;: &quot;create docker container with go server&quot;
        },
        {
            &quot;id&quot;: 91,
            &quot;name&quot;: &quot;Postman&quot;,
            &quot;description&quot;: &quot;create postman test for docker container&quot;
        },
        {
            &quot;id&quot;: 92,
            &quot;name&quot;: &quot;Documentation&quot;,
            &quot;description&quot;: &quot;write markdown documentation that describes installation, API, models, dependencies, deployment and so on&quot;
        }
    ]
}
</div></code></pre>
<h2 id="get-todo">GET todo</h2>
<pre class="hljs"><code><div>GET /todos/{id}
</div></code></pre>
<p>Returns a JSON with the todo for the &quot;id&quot; provided in the request url.</p>
<p>Example response JSON:</p>
<pre class="hljs"><code><div>{
    &quot;id&quot;: 16,
    &quot;name&quot;: &quot;todolist go REST API&quot;,
    &quot;description&quot;: &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
    &quot;tasks&quot;: [
        {
            &quot;id&quot;: 88,
            &quot;name&quot;: &quot;Create Server&quot;,
            &quot;description&quot;: &quot;Create Server according to specs with go&quot;
        },
        {
            &quot;id&quot;: 89,
            &quot;name&quot;: &quot;Unittest&quot;,
            &quot;description&quot;: &quot;Build Unittest for go server&quot;
        },
        {
            &quot;id&quot;: 90,
            &quot;name&quot;: &quot;Docker&quot;,
            &quot;description&quot;: &quot;create docker container with go server&quot;
        },
        {
            &quot;id&quot;: 91,
            &quot;name&quot;: &quot;Postman&quot;,
            &quot;description&quot;: &quot;create postman test for docker container&quot;
        },
        {
            &quot;id&quot;: 92,
            &quot;name&quot;: &quot;Documentation&quot;,
            &quot;description&quot;: &quot;write markdown documentation that describes installation, API, models, dependencies, deployment and so on&quot;
        }
    ]
}
</div></code></pre>
<h2 id="put-todo">PUT todo</h2>
<pre class="hljs"><code><div>PUT /todos/{id}
</div></code></pre>
<p>Overwrites a todo with the todo provided in the JSON. The JSON shall include the &quot;id&quot; field for the todo. If no &quot;id&quot; field is provided for a task, this task is added as a new task for this todo. If a &quot;id&quot; field is provided the exiting task will be overwritten with the corresponding task provided in the JSON.</p>
<p>Example request JSON:</p>
<pre class="hljs"><code><div>{
    &quot;id&quot;: 16,
    &quot;CreatedAt&quot;: &quot;2021-04-30T00:00:21.093101+02:00&quot;,
    &quot;UpdatedAt&quot;: &quot;2021-04-30T00:00:21.093101+02:00&quot;,
    &quot;DeletedAt&quot;: null,
    &quot;name&quot;: &quot;todolist go REST API finalization&quot;,
    &quot;description&quot;: &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
    &quot;tasks&quot;: [
        {
            &quot;name&quot;: &quot;Continous Integration&quot;,
            &quot;description&quot;: &quot;add automatic unitest before deployment&quot;
        }
    ]
}
</div></code></pre>
<p>Returns a JSON with the todo that was provided in the POST request with the corresponding &quot;id&quot; fields for the todo and the tasks.</p>
<p>Example response JSON:</p>
<pre class="hljs"><code><div>{
    &quot;id&quot;: 16,
    &quot;name&quot;: &quot;todolist go REST API finalization&quot;,
    &quot;description&quot;: &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
    &quot;tasks&quot;: [
        {
            &quot;id&quot;: 88,
            &quot;name&quot;: &quot;Create Server&quot;,
            &quot;description&quot;: &quot;Create Server according to specs with go&quot;
        },
        {
            &quot;id&quot;: 89,
            &quot;name&quot;: &quot;Unittest&quot;,
            &quot;description&quot;: &quot;Build Unittest for go server&quot;
        },
        {
            &quot;id&quot;: 90,
            &quot;name&quot;: &quot;Docker&quot;,
            &quot;description&quot;: &quot;create docker container with go server&quot;
        },
        {
            &quot;id&quot;: 91,
            &quot;name&quot;: &quot;Postman&quot;,
            &quot;description&quot;: &quot;create postman test for docker container&quot;
        },
        {
            &quot;id&quot;: 92,
            &quot;name&quot;: &quot;Documentation&quot;,
            &quot;description&quot;: &quot;write markdown documentation that describes installation, API, models, dependencies, deployment and so on&quot;
        },
        {
            &quot;id&quot;: 98,
            &quot;name&quot;: &quot;Continous Integration&quot;,
            &quot;description&quot;: &quot;add automatic unitest before deployment&quot;
        }
    ]
}
</div></code></pre>
<h2 id="delete-todo">DELETE todo</h2>
<pre class="hljs"><code><div>DELETE /todos/{id}
</div></code></pre>
<p>Soft deletes the todo with the &quot;id&quot; provided in the request url and returns the deleted todo.</p>
<p>Note: Soft deleted todos are no longer accessible with the usual todolist REST API routes but can be viewed with database tooling until permanently deleted with DELETE /todos.</p>
<p>Example response JSON:</p>
<pre class="hljs"><code><div>{
    &quot;id&quot;: 16,
    &quot;name&quot;: &quot;todolist go REST API finalization&quot;,
    &quot;description&quot;: &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
    &quot;tasks&quot;: [
        {
            &quot;id&quot;: 88,
            &quot;name&quot;: &quot;Create Server&quot;,
            &quot;description&quot;: &quot;Create Server according to specs with go&quot;
        },
        {
            &quot;id&quot;: 89,
            &quot;name&quot;: &quot;Unittest&quot;,
            &quot;description&quot;: &quot;Build Unittest for go server&quot;
        },
        {
            &quot;id&quot;: 90,
            &quot;name&quot;: &quot;Docker&quot;,
            &quot;description&quot;: &quot;create docker container with go server&quot;
        },
        {
            &quot;id&quot;: 91,
            &quot;name&quot;: &quot;Postman&quot;,
            &quot;description&quot;: &quot;create postman test for docker container&quot;
        },
        {
            &quot;id&quot;: 92,
            &quot;name&quot;: &quot;Documentation&quot;,
            &quot;description&quot;: &quot;write markdown documentation that describes installation, API, models, dependencies, deployment and so on&quot;
        },
        {
            &quot;id&quot;: 98,
            &quot;name&quot;: &quot;Continous Integration&quot;,
            &quot;description&quot;: &quot;add automatic unitest before deployment&quot;
        }
    ]
}
</div></code></pre>
<h2 id="delete-todos">DELETE todos</h2>
<pre class="hljs"><code><div>DELETE /todos/{id}
</div></code></pre>
<p>Permanently deletes only todos marked with soft delete. Todos that were not soft deleted yet, are not affected. Returns the permanently deleted todos.</p>
<p>Example response JSON:</p>
<pre class="hljs"><code><div>[
    {
        &quot;id&quot;: 16,
        &quot;name&quot;: &quot;todolist go REST API finalization&quot;,
        &quot;description&quot;: &quot;write a REST API in go for a simple todo list. Each todo can have multiple subtodos called tasks&quot;,
        &quot;tasks&quot;: [
            {
                &quot;id&quot;: 88,
                &quot;name&quot;: &quot;Create Server&quot;,
                &quot;description&quot;: &quot;Create Server according to specs with go&quot;
            },
            {
                &quot;id&quot;: 89,
                &quot;name&quot;: &quot;Unittest&quot;,
                &quot;description&quot;: &quot;Build Unittest for go server&quot;
            },
            {
                &quot;id&quot;: 90,
                &quot;name&quot;: &quot;Docker&quot;,
                &quot;description&quot;: &quot;create docker container with go server&quot;
            },
            {
                &quot;id&quot;: 91,
                &quot;name&quot;: &quot;Postman&quot;,
                &quot;description&quot;: &quot;create postman test for docker container&quot;
            },
            {
                &quot;id&quot;: 92,
                &quot;name&quot;: &quot;Documentation&quot;,
                &quot;description&quot;: &quot;write markdown documentation that describes installation, API, models, dependencies, deployment and so on&quot;
            },
            {
                &quot;id&quot;: 98,
                &quot;name&quot;: &quot;Continous Integration&quot;,
                &quot;description&quot;: &quot;add automatic unitest before deployment&quot;
            }
        ]
    }
]
</div></code></pre>

</body>
</html>
